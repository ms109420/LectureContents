# Kubernetes

## What is the Kubernetes ?

```make
쿠버네티스는 컨테이너화된 애플리케이션을 효율적으로 배포하고 운영하기 위해 설계된 오픈 소스 플랫폼이다.
그러므로 먼저 컨테이너를 사용하는 이유를 이해해야 한다.

애플리케이션을 사용할 때 남녀노소를 불문하고
스마트폰을 통해 게임, 음악, 쇼핑, SNS 등의 애플리케이션을 사용한다.
일상에서 수시로 사용되고 경쟁 애플리케이션들이 범람하는 가운데
중요성이 점차 높아지는 것이 바로 지속적 통합(CI)과 지속적 배포(CD)에 해당한다.
사용자에게 새로운 기능과 서비스를 빠르고 안정적으로 제공해야 한다.

오픈소스가 좋지만 버전의 차이로 생산성과 안정성 문제가 발생한다.
이러한 상황에서 컨테이너 기법이 아주 효율적이다.
컨테이너 기술은 애플리케이션 실행에 필요한 라이브러리나
운영체제 패키지 등을 모두 담아서 불변의 실행 환경을 만든다.
이렇게 하면 개발자들 간에 그리고 테스트와 운영 환경 간의 차이를 없앨 수 있어 생산성이 높아지고
애플리케이션 정식 서비스를 안정적으로 배포할 수 있게 된다.
```

## Where I can use Kubernetes ?

```make
스마트폰 애플리케이션은 일상에서 빈번하게 사용되며
새로운 아이디어와 사용자들의 피드백에 따라 자주 새로운 버전이 출시된다.
이러한 개발 환경에서는 지속적 통합(CI)과 지속적 배포(CD)가 중요한데
Docker와 Kubernetes를 사용하면 아래와 같은 과제들을 효과적으로 해결할 수 있다.
```

## 빈번한 애플리케이션의 신규 출시

```make
경쟁사보다 뛰어난 애플리케이션을 제공하기 위해
되도록 많은 아이디어를 실험해 보고, 실패를 경험하고, 성공에 도달하는 것이 중요하다.
쿠버네티스의 롤아웃과 롤백 기능은 새로운 기능을 빈번하게 출시하고
버그 수정을 긴급 투입하는 것과 같은 민감한 작업을 안전하게 자동화한다.
이를 사용하면 정식 운영중인 서비스의 애플리케이션 컨테이너를 무정지로 교체할 수 있다.
또한 교체 중에 발생하는 성능 저하와
프로그램 충돌로 인한 서비스 정지를 막기 위해 컨테이너 교체 정책을 설정할 수 있다.
또한 롤아웃을 취소하고 롤백하는 것 또한 가능하다.
```

## 무정지 서비스

```make
스마트폰이 보급되면서 사용자들은 24시간 언제 어디서나,
심지어 이동 중에도 서비스에 접근할 수 있게 되었다.
특히 IoT가 발전하면서 자동차, 가전제품 등에도 인터넷이 연결되기 시작했다.
이처럼 IT 기술이 사람들의 생활을 감싸기 시작하면서 서비스의 가용성이 중요한 요건이 되었다.

쿠버네티스의 자기 회복 기능은 무정지 서비스 운영을 도와준다.
응답이 없어진 컨테이너를 재기동하며 쿠버네티스 클러스터내에 지정한 수만큼 컨테이너가 돌도록 관리한다.
```

## 초기 비용을 낮추고 비즈니스 상황에 맞게 규모 조정

```make
컨테이너 기술은 애플리케이션과 실행 환경을 하나로 묶어서 배포할 수 있게 해준다.
그리고 쿠버네티스는 복수의 노드 위에서 컨테이너가 조화롭게 돌아갈 수 있도록 해준다.

클러스터의 각 노드들이 똑같은 스펙일 필요도 없다.
그러므로 비즈니스 초기 단계에서는 스펙이 낮고 저렴한 가상 서버를 사용하다가
비즈니스가 확대되면 고성능의 가상 서버나 물리 서버를 투입시키는 전략을 취하여 초기 비용을 낮출 수도 있다.

클러스터 내에서 컨테이너를 다른 노드로 옮기기 위해서는
먼저 해당 노드에 스케쥴이 되지 않도록 설정하고 해당 노드의 모든 컨테이너를 추방시키면 된다.
```

## 쿠버네티스와 외부 서비스와의 연동

```make
애플리케이션 서버와 달리 DB에 대한 컨테이너화는 신중하게 접근할 필요가 있다.
컨테이너는 언제든지 재시작될 수 있는 일시적인 존재로 상태를 포함하지 않는 것을 전제로 한다.
이때 DBaaS와 같이 하이브리드한 시스템을 구축하는 것이 대안이 될 수 있다.
쿠버네티스는 외부 서비스를 내부 DNS에 등록하는 기능을 제공한다.
```

## 개발 환경과 운영 환경의 분리

```make
컨테이너의 개발이 완료되어 테스트까지 끝났다면
정식 서비스 때 배포하기 전까지는 이미지를 다시 빌드하지 않는 것이 좋다.
운영 환경에서 사용하는 엔드포인트나 인증 정보등이 테스트 환경과 다를 수 있다.
```

## 온프레미스와 클라우드 위에 구축

```make
보안상의 이유로 인터넷을 경유하는 퍼블릭 클라우드를 사용하지 않는 기업도 있다.
대형 클라우드 업체들은 AWS, Azure, IBM Cloud 와 같은 쿠버네티스 서비스를 제공한다.
이는 인프라의 복잡성을 감추며 일관된 인터페이스로 다룰 수 있도록 설계되었다.
```

## 애플리케이션 중심의 오케스트레이션

```make
쿠버네티스는 애플리케이션 중심의 운영이라는 흐름을 더욱 가속화하고 있다.
애플리케이션 개발자가 YAML 파일을 기술하여 쿠버네티스에 제출하면
로드밸런서, 저장소, 네트워크, 런타임 등의 환경이 구성된다.
```

## 특정 기업에 종속되지 않는 표준 기술

```make
IT 기술은 기업의 경영 자원으로서 그 중요도가 점점 높아진다.
특히 빅데이터 및 인공지능 기술이 기업 성장에 중요한 요소로 부각되고 있다.
이러한 기술들의 실행 환경으로 주목받는 것이 컨테이너 기술과 쿠버네티스다.
```

### 서버들의 가동률 높이기

```make
CPU 사용률이 낮은 서버가 많은 것은 클라우드에서도 바람직하지 않다.
쿠버네티스에서 사용되는 컨테이너 기술은 애플리케이션이 정해진 서버에서 돌지 않아도 된다.
또한 CPU 사용 시간이나 메모리 요구량도 간단히 제어할 수 있다.

이 기술 덕분에 쿠버네티스는 가동률이 적은 서버의 애플리케이션을 한곳에 모을 수 있다.
그래서 서버의 CPU 가동률을 높게 유지하면서도
안정적으로 서비스를 제공한다는 상반되는 요구사항을 충족시킬 수 있다.
```
